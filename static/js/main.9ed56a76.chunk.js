(this["webpackJsonpreact-ts-calc"]=this["webpackJsonpreact-ts-calc"]||[]).push([[0],{78:function(e,t,r){},79:function(e,t,r){"use strict";r.r(t);var a,n,i=r(4),c=r(0),s=r.n(c),u=r(9),o=r.n(u),l=r(27),h=r(57),d=r(123),j=r(117),f=r(118),m=r(119),b=r(121),v=r(110),x=r(116),p=r(111),O=r(112),T=r(113),g=r(17),y=r(58),k=r(24),V=r(40),I=r(59),S=function(){function e(){Object(k.a)(this,e),this.items=[],this.nTotalItems=0,this.sum=0,this._cookies=void 0}return Object(V.a)(e,[{key:"saveToCookie",value:function(){var e=JSON.stringify(this);this.cookies.set(this.constructor.name,e)}},{key:"loadFromCookie",value:function(){var e=this.cookies.get(this.constructor.name);Object.assign(this,e)}},{key:"clear",value:function(){this.items=[],this.refreshSum()}},{key:"deleteItem",value:function(e){this.items=this.items.filter((function(t){return t.id!==e})),this.refreshSum()}},{key:"createNewItem",value:function(e,t){var r={id:this.nTotalItems,active:!0,value:Number(e),op:t};return this.items=[].concat(Object(y.a)(this.items),[r]),this.nTotalItems++,this.refreshSum(),r}},{key:"refreshSum",value:function(){this.items&&0!==this.items.length?this.sum=this.items.filter((function(e){return e.active})).map((function(e){return e.value})).reduce((function(e,t){return e+t}),0):this.sum=0}},{key:"cookies",get:function(){return this._cookies?this._cookies:new I.a}},{key:"cookieKey",get:function(){return this.constructor.name+"_"+e.serialVersionID}}]),e}();S.serialVersionID="v1.0",function(e){e[e.PLUS=0]="PLUS",e[e.MINUS=1]="MINUS",e[e.MULTIPLY=2]="MULTIPLY",e[e.DIVIDE=3]="DIVIDE"}(a||(a={})),function(e){e[e.ADD=0]="ADD",e[e.DELETE=1]="DELETE",e[e.REFRESH=2]="REFRESH",e[e.CLEAR=3]="CLEAR",e[e.SAVE=4]="SAVE",e[e.LOAD=5]="LOAD"}(n||(n={}));var E=function(e,t){switch(t.type){case n.ADD:return function(e,t){e.model.createNewItem(t.payload,a.PLUS),e.currentInput=0}(e,t),Object(g.a)({},e);case n.DELETE:return function(e,t){e.model.deleteItem(t.payload)}(e,t),Object(g.a)({},e);case n.REFRESH:return function(e,t){e.model.refreshSum()}(e),Object(g.a)({},e);case n.CLEAR:return function(e,t){e.model.clear()}(e),Object(g.a)({},e);case n.SAVE:return function(e,t){e.model.saveToCookie(),e.currentInput=0}(e),e;case n.LOAD:return function(e,t){e.model.loadFromCookie(),e.currentInput=0}(e),Object(g.a)({},e);default:return e}};var R=r(37),D=r(36),w=r(120),L=function(e){Object(R.a)(r,e);var t=Object(D.a)(r);function r(e){var a;Object(k.a)(this,r),(a=t.call(this,e)).textFieldRef=s.a.createRef(),a.defaultState=void 0,a.defaultResult=void 0,a.onInputChange=function(e){var t,r=e.target.value,n=a.formatText(r);a.state.text!==n.formattedText&&(t=n.textToValueResult.errorMsg?e.target.value:n.formattedText,a.setState({text:t,errorMsg:n.textToValueResult.errorMsg}),a.props.onInputValue&&a.props.onInputValue(n.textToValueResult))};var n=e.value?a.valueToText(e.value):"";return a.defaultResult=a.textToValue(n),a.defaultState={text:n,errorMsg:a.defaultResult.errorMsg},a.state=a.defaultState,a}return Object(V.a)(r,[{key:"clear",value:function(){this.setState(this.defaultState),this.props.onInputValue&&this.props.onInputValue(this.defaultResult)}},{key:"muiTextFieldProps",value:function(){for(var e=Object.assign({},this.props),t=0,r=["onInputValue","errorValue","defaultText","textToValue","valueToText"];t<r.length;t++){delete e["".concat(r[t])]}return e.ref=this.textFieldRef,e.onInput=this.onInputChange,e.error=!!this.state.errorMsg,e.helperText=this.helperText(),e.value=this.state.text,e}},{key:"valueToText",value:function(e){return this.props.valueToText(e)}},{key:"textToValue",value:function(e){e||(e="");try{return{value:this.props.textToValue(e),errorMsg:""}}catch(r){var t;return t="message"in r?r.message:JSON.stringify(r),{value:this.props.errorValue,errorMsg:t}}}},{key:"getValue",value:function(){var e=this.getRawText();return this.textToValue(e).value}},{key:"getRawText",value:function(){return this.textFieldRef.current.value}},{key:"isValid",value:function(){return this._isValid(this.getRawText())}},{key:"_isValid",value:function(e){return!this.textToValue(e).errorMsg}},{key:"_checkValid",value:function(e){var t=this.state.errorMsg,r=this.textToValue(e).errorMsg;t!==r&&this.setState(Object(g.a)(Object(g.a)({},this.state),{},{errorMsg:r}))}},{key:"helperText",value:function(){return this.state.errorMsg&&this.state.errorMsg.trim()?this.state.errorMsg:""}},{key:"formatText",value:function(e){var t=this.textToValue(e);return{textToValueResult:t,formattedText:t.errorMsg?e:this.props.valueToText(t.value)}}},{key:"render",value:function(){return Object(i.jsx)(w.a,Object(g.a)({},this.muiTextFieldProps()))}}]),r}(s.a.Component),M=function(e){Object(R.a)(r,e);var t=Object(D.a)(r);function r(){return Object(k.a)(this,r),t.apply(this,arguments)}return r}(L);function C(e){var t=e.dispatch,r=e.canClear,a=Object(c.useState)(0),s=Object(l.a)(a,2),u=s[0],o=s[1],h=Object(c.useRef)(null);return Object(i.jsx)(b.a,{mb:4,children:Object(i.jsx)("form",{onSubmit:function(e){e.preventDefault(),t({type:n.ADD,payload:u}),h.current.clear(),e.target.querySelector("input").focus()},children:Object(i.jsxs)(v.a,{container:!0,direction:"column",spacing:2,children:[Object(i.jsx)(v.a,{item:!0,children:Object(i.jsx)(M,{fullWidth:!0,ref:h,onInputValue:function(e){o(e.value)},variant:"outlined",label:"\u6570\u5b57\u3092\u5165\u529b",value:NaN})}),Object(i.jsxs)(v.a,{item:!0,container:!0,spacing:2,children:[Object(i.jsx)(v.a,{item:!0,xs:6,children:Object(i.jsx)(p.a,{style:{width:"100%",height:"100%"},type:"submit",disabled:!(!isNaN(u)&&0!==u),startIcon:Object(i.jsx)(O.a,{}),variant:"contained",color:"primary",children:"\u8ffd\u52a0"})}),Object(i.jsx)(v.a,{item:!0,xs:6,children:Object(i.jsx)(p.a,{style:{width:"100%",height:"100%"},onClick:function(e){t({type:n.CLEAR})},disabled:!r,startIcon:Object(i.jsx)(T.a,{}),variant:"contained",color:"secondary",children:"\u30aa\u30fc\u30eb\u30af\u30ea\u30a2"})})]})]})})})}M.defaultProps={errorValue:NaN,textToValue:function(e){if(!e||!e.trim())throw new Error(" ");var t=Number(e.replaceAll(".","").replaceAll(",",""));if(isNaN(t))throw new Error("\u6570\u5024\u304c\u8aad\u307f\u53d6\u308c\u307e\u305b\u3093\u3002");return t},valueToText:function(e){return e.toLocaleString("en")}},(function(e){Object(R.a)(r,e);var t=Object(D.a)(r);function r(){return Object(k.a)(this,r),t.apply(this,arguments)}return r}(L)).defaultProps={errorValue:"",defaultText:"",textToValue:function(e){if(!e||!e.trim())throw new Error(" ");return e},valueToText:function(e){return e}};var N=r(82),A=r(56),F=r.n(A);function P(e){var t=e.items,r=e.dispatch;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(b.a,{children:t.map((function(e){return Object(i.jsx)(b.a,{m:1,children:Object(i.jsx)(N.a,{elevation:3,style:{backgroundColor:F.a[100]},children:Object(i.jsx)(b.a,{p:1,children:Object(i.jsx)(H,{item:e,dispatch:r})})})},e.id)}))})})}var U=r(122),_=r(114),H=function(e){var t=e.item,r=e.dispatch,a=Object(c.useState)(t.value),s=Object(l.a)(a,2),u=(s[0],s[1]),o=Object(c.useState)(t.active),h=Object(l.a)(o,2),d=(h[0],h[1]);return Object(i.jsxs)(b.a,{display:"flex",children:[Object(i.jsx)(U.a,{color:"primary",checked:t.active,onChange:function(e){d(e.target.checked),t.active=e.target.checked,console.log("check clicked"),r({type:n.REFRESH})}}),Object(i.jsx)(b.a,{flexGrow:1,mx:2,children:Object(i.jsx)(M,{fullWidth:!0,onInputValue:function(e){u(e.value),t.value=e.value,r({type:n.REFRESH})},variant:"standard",value:t.value})}),Object(i.jsx)(p.a,{startIcon:Object(i.jsx)(_.a,{}),size:"small",variant:"contained",color:"secondary",onClick:function(e){r({type:n.DELETE,payload:t.id})},children:"\u524a\u9664"})]})},J=r(115);var W=Object(J.a)((function(e){return{box:{borderWidth:5,border:5,padding:20}}})),q=function(e){var t,r=e.sum,a=W();return Object(i.jsx)(b.a,{border:6,className:a.box,children:Object(i.jsx)(x.a,{variant:"h3",children:(t=r,t.toLocaleString("en"))})})},Y=(r(78),Object(h.a)());Y=Object(d.a)(Y);var z={model:new S,currentInput:0};function G(){var e=Object(c.useReducer)(E,z),t=Object(l.a)(e,2),r=t[0],a=t[1];return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(j.a,{theme:Y,children:Object(i.jsxs)(f.a,{maxWidth:"md",children:[Object(i.jsx)(m.a,{position:"sticky",children:Object(i.jsx)(b.a,{m:"auto",children:Object(i.jsx)(q,{sum:r.model.sum})})}),Object(i.jsx)(v.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:5,children:Object(i.jsx)(b.a,{m:5,style:{width:"80%"},children:Object(i.jsxs)(x.a,{variant:"button",children:[Object(i.jsx)(v.a,{item:!0,children:Object(i.jsx)(C,{dispatch:a,canClear:r.model.items&&0!==r.model.items.length})}),Object(i.jsx)(v.a,{item:!0,children:Object(i.jsx)(P,{items:r.model.items,dispatch:a})})]})})})]})})})}o.a.render(Object(i.jsx)(G,{}),document.querySelector("#root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.9ed56a76.chunk.js.map